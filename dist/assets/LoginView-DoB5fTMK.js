var b=Object.defineProperty;var E=(s,e,t)=>e in s?b(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var g=(s,e,t)=>E(s,typeof e!="symbol"?e+"":e,t);import{a as h,d as I,r as x,b as k,U as S,c as v,o as A,e as U,f as u,g as f,h as r,w as p,v as w,u as d,i as L,j as P,k as T,E as V,_ as N,l as W,m as $,n as B,p as C}from"./index-BaQHJua5.js";class F{}class R extends F{constructor(){super(...arguments);g(this,"apiUrl","https://localhost:52175/api/User/ValidateUserOrEmployee")}async signInWithEmailAndPassword(t,l){var o;try{return(await h.post(this.apiUrl,{UserEmail:t,Password:l},{headers:{"Content-Type":"application/json"}})).data}catch(a){if(h.isAxiosError(a)){const i=(o=a.response)==null?void 0:o.data;throw new Error(i.message||"Error en la autenticación")}else throw console.error("Unexpected error:",a),new Error("Error inesperado en la autenticación")}}saveToken(t){localStorage.setItem("token",t)}getToken(){return localStorage.getItem("token")}clearToken(){localStorage.removeItem("token")}}class j{static signInWithEmailAndPassword(e,t){return new R().signInWithEmailAndPassword(e,t)}}class M{constructor(e){this.authService=e}static execute(e,t){return j.signInWithEmailAndPassword(e,t)}}const _={email:"",password:""},H=I("auth",()=>{const s=x(null),e=k({..._}),t=()=>{e.password=_.password};return{user:s,loginForm:e,LoginWithEmailAndPassword:async()=>{try{let o;if(o=await M.execute(e.email,e.password),o.status!=="Success")throw new Error(o.message);if(!o.userInfo||!o.userInfo[0])throw new Error("User information is missing in the response.");if(!o.tokenInfo||!o.tokenInfo[0])throw new Error("Token information is missing in the response.");const a=o.userInfo[0],i=o.tokenInfo[0];return s.value=new S(a.id,a.firstName,a.lastName,a.email,i.accessToken),localStorage.setItem("user",JSON.stringify(s.value)),s.value}catch(o){throw t(),o}},resetForm:t}}),O=r("h1",{class:"text-5xl font-semibold"},"Portal HiCody",-1),q=r("p",{class:"font-medium text-lg text-gray-500 mt-4"},"!Bienvenido de vuelta! Por favor ingresa tus credenciales.",-1),D={class:"mt-8"},z=r("label",{class:"text-lg font-medium",for:"form-email"},"Email",-1),J=r("label",{class:"text-lg font-medium",for:"form-password"},"Contraseña",-1),G=r("div",{class:"mt-8 flex justify-between items-center"},[r("div",null,[r("input",{type:"checkbox",id:"remember"}),r("label",{class:"ml-2 font-medium text-base",for:"remember"},"Recuerdame por 30 dias")]),r("button",{class:"font-medium text-base text-primary"},"Olvidé mí contraseña")],-1),K={class:"mt-8 flex flex-col gap-y-4"},Q={type:"submit",class:"active:scale-[.98] active:duration-75 hover:scale-[1.01] ease-in-out transition-all py-3 rounded-xl bg-primary text-white text-lg font-bold"},X=v({__name:"LoginForm",setup(s){const{LoginWithEmailAndPassword:e,loginForm:t,resetForm:l}=H(),o=T(),a=x(!1),i=async()=>{a.value=!0;try{await e()&&o.replace({name:"home"})}catch(m){V({title:"Error",message:""+m,type:"error"})}finally{a.value=!1}};return A(()=>{l()}),(m,n)=>{const y=U("loading");return u(),f("form",{class:"bg-white px-10 py-20 rounded-3xl border-2 border-gray-100",onSubmit:n[2]||(n[2]=P(c=>i(),["prevent"]))},[O,q,r("div",D,[r("div",null,[z,p(r("input",{"onUpdate:modelValue":n[0]||(n[0]=c=>d(t).email=c),type:"email",id:"form-email",class:"w-full border-2 border-gray-100 rounded-xl p-4 mt-1 bg-transparent",placeholder:"Ingresa tu email",required:""},null,512),[[w,d(t).email]])]),r("div",null,[J,p(r("input",{"onUpdate:modelValue":n[1]||(n[1]=c=>d(t).password=c),type:"password",id:"form-password",class:"w-full border-2 border-gray-100 rounded-xl p-4 mt-1 bg-transparent",placeholder:"Ingresa tu contraseña",required:""},null,512),[[w,d(t).password]])]),G,r("div",K,[p((u(),f("button",Q,[L("Iniciar Sesión")])),[[y,a.value]])])])],32)}}}),Y="/assets/logoRedHat-Vertical-Bg-AzMpg.png",Z={},ee={class:"flex w-full h-screen"},te={class:"w-full flex items-center justify-center lg:w-1/2"},se=r("div",{class:"hidden lg:flex h-full w-1/2 items-center justify-center bg-gray-200"},[r("img",{src:Y,alt:"Logo RedHat"})],-1);function re(s,e){return u(),f("div",ee,[r("div",te,[W(s.$slots,"default")]),se])}const oe=N(Z,[["render",re]]),ie=v({__name:"LoginView",setup(s){return(e,t)=>(u(),$(oe,null,{default:B(()=>[C(X)]),_:1}))}});export{ie as default};
